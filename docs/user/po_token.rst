.. _pot_token:

Add PoToken
===========

The proof of origin (PO) token is a parameter that YouTube requires to be sent with video playback requests from some clients. Without it, format URL requests from affected customers may return HTTP error 403, error with bot detection, or result in your account or IP address being blocked.

This token is generated by BotGuard (Web) / DroidGuard (Android) to attest the requests are coming from a genuine client. This guide will be assuming the use of a PO Token generated by BotGuard, for use with the `web` client.

**Manually acquiring a PO Token from a browser for use when logged out**

This process involves manually obtaining a PO token generated from YouTube in a web browser and then manually passing it to pytubefix via the use_pot=True argument.
Steps:

1. Open a browser and go to any video on YouTube Music or YouTube Embedded (e.g. https://www.youtube.com/embed/aqz-KE-bpKQ). **Make sure you are not logged in to any account!**
2. Open the developer console (F12), then go to the "Network" tab and filter by `v1/player`
3. Click the video to play and a player request will appear in the network tab
4. In the request payload JSON, find the PO Token at `serviceIntegrityDimensions.poToken` and save that value
5. In the request payload JSON, find the visitorData at `context.client.visitorData` and save that value
6. In the pytubefix code, pass the parameter `use_po_token=True`, to send the visitorData and PoToken::

        from pytubefix import YouTube

        url = input("url >")

        yt = YouTube(url, use_po_token=True)
        print(yt.title)

        ys = yt.streams.get_highest_resolution()
        ys.download()
